<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title></title>
    <script src="js/jquery-1.4.4.min.js" type="text/javascript"></script>
    <script src="js/jquery.OHM.js" type="text/javascript"></script>
    <script src="js/json2.js" type="text/javascript"></script>
    <script type="text/javascript">
        var data = { Msg: "object with list of sub items", Users: [{ Name: "jo", IsPaid: true }, { Name: "smo", IsPaid: false}] };
        $(function () {
            var listMap = {
                Users: {
                    ApplyTemplate: function (listContainer, items, prefix) {
                        for (var i = 0; i < items.length; i++) {
                            //to keep the example simple i dont use any template like ejs or tmpl later i will show an example with tmpl
                            $("<div class='Users_item'><input type='text' class='" + prefix + "Name' /><input type='checkbox'  class='" + prefix + "IsPaid' /><input type='button'  value='Remove' class='Remove' /></div> ").appendTo(listContainer);
                        }
                    },
                    DefaultObject: { Name: "Default Name", IsPaid: false },
                    AddBtnSelector: ".Add",
                    DeleteBtnSelector: ".Remove"
                }
            };
            $(".pnlForm").ObjectToHtml(data, listMap);

            $("#btnBackToObj").click(function () {

                //With OHM
                var newData = $(".pnlForm").HtmlToObject(data, listMap);

                alert(JSON.stringify(newData));
                //use firebug for better web :-) 
                // console.log(JSON.stringify(newData));
            });
        });
    </script>
</head>
<body>
    <div class="pnlForm">
        <h3 class="Msg">
        </h3>

            <h4>Name                 </h4>

        <div class="Users">

        </div>
        <input type="button"  value="Add" class="Add" />
        <input type="button" id="btnBackToObj" value="BacktToObject" />
    </div>
</body>
</html>
